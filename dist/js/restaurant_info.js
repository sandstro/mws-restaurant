"use strict";var map,restaurant=void 0;window.initRestaurantMap=function(){fetchRestaurantFromURL(function(e,n){e?console.error(e):(self.map=new google.maps.Map(document.getElementById("map"),{zoom:16,center:n.latlng,scrollwheel:!1}),fillBreadcrumb(n),DBHelper.mapMarkerForRestaurant(self.restaurant,self.map),self.map.addListener("tilesloaded",function(){return document.querySelector("#map iframe").setAttribute("title","Location on Google Maps")}))})};var fetchRestaurantFromURL=function(t){if(self.restaurant)t(null,self.restaurant);else{var e=getParameterByName("id");e?DBHelper.fetchRestaurantById(e,function(e,n){(self.restaurant=n)?(fillRestaurantHTML(),t(null,n)):console.error(e)}):(error="No restaurant id in URL",t(error,null))}},fillRestaurantHTML=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:self.restaurant;document.getElementById("restaurant-name").innerHTML=e.name,document.getElementById("restaurant-address").innerHTML=e.address;var n=document.getElementById("restaurant-img");n.className="restaurant-img",n.alt="An image of "+e.name+" in "+e.neighborhood,n.src=DBHelper.imageUrlForRestaurant(e),document.getElementById("restaurant-cuisine").innerHTML=e.cuisine_type,e.operating_hours&&!nodeHasContent("#restaurant-hours")&&fillRestaurantHoursHTML(e.operating_hours),e.reviews&&!nodeHasContent("#reviews-list")&&fillReviewsHTML(e.reviews)},fillRestaurantHoursHTML=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:self.restaurant.operating_hours,n=document.getElementById("restaurant-hours");for(var t in e){var r=document.createElement("tr"),a=document.createElement("td");a.tabIndex=0,a.innerHTML=t,r.appendChild(a);var i=document.createElement("td");i.tabIndex=0,i.innerHTML=e[t],r.appendChild(i),n.appendChild(r)}},fillReviewsHTML=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:self.restaurant.reviews,n=document.getElementById("reviews-container"),t=document.createElement("h3");if(t.id="reviews__heading",t.innerHTML="Reviews",n.appendChild(t),!e){var r=document.createElement("p");return r.innerHTML="No reviews yet!",void n.appendChild(r)}var a=document.getElementById("reviews-list");e.forEach(function(e){a.appendChild(createReviewHTML(e))}),n.appendChild(a)},createReviewHTML=function(e){var n=document.createElement("li"),t=document.createElement("p");t.innerHTML=e.name,n.appendChild(t);var r=document.createElement("p");r.innerHTML=e.date,n.appendChild(r);var a=document.createElement("p");a.innerHTML="Rating: "+e.rating,n.appendChild(a);var i=document.createElement("p");return i.innerHTML=e.comments,n.appendChild(i),n},fillBreadcrumb=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:self.restaurant,n=document.getElementById("breadcrumb");if(1===n.children.length){var t=document.createElement("li");t.innerHTML=e.name,n.appendChild(t)}},getParameterByName=function(e,n){n||(n=window.location.href),e=e.replace(/[\[\]]/g,"\\$&");var t=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(n);return t?t[2]?decodeURIComponent(t[2].replace(/\+/g," ")):"":null},nodeHasContent=function(e){return 0<document.querySelector(e).children.length};
//# sourceMappingURL=restaurant_info.js.map
